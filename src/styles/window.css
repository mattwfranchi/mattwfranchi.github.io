/* Mobile-first window styling with performance optimizations */
:root {
  --window-width: 3000px;
  --window-height: 2400px;
  --corner-wall-width: 32rem;
  --wall-color: #233156;
  --window-inset-y: 8rem;
  --window-frame-border: 5rem;
  --window-frame-inner-border: 4.5rem;
  --window-pane-gap: 4.5rem;
  --window-cross-pane-width: 5rem;
  --room-wall-color: #233156;
  --room-wall-dark: #1a2440;
  --sill-oak-light: #c89272;
  --sill-oak-mid: #b47e56;
  --sill-oak-dark: #9e6b4a;
}

/* Base Styles - mobile optimized */
.window-background {
  position: fixed;
  top: 50%;
  left: 50%;
  width: var(--window-width);
  height: var(--window-height);
  contain: size layout;
  transform-origin: center center;
  /* Simplified 2D transform for mobile compatibility */
  transform: translate(-50%, -50%) translate(var(--translateX, 0), var(--translateY, 0)) scale(var(--scale, 1));
  overflow: visible !important;
  z-index: 1;
}

.window-background.is-transitioning {
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform;
}

/* Simplified background for mobile and low-power devices */
.window-background.simplified,
.mobile-optimized .window-background {
  background-color: var(--wall-color);
  contain: strict;
  content-visibility: auto;
}

/* Simplified wall background - remove complex patterns */
.window-background::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--wall-color);
  /* Simple gradient instead of complex patterns */
  background-image: linear-gradient(45deg, rgba(255,255,255,0.02) 0%, transparent 100%);
  z-index: 1;
  /* Simplified shadow */
  box-shadow: inset 0 0 50px rgba(0,0,0,0.3);
  contain: paint;
}

/* Mobile optimization - remove all complex effects */
.mobile-optimized .window-background::before {
  background-image: none;
  box-shadow: none;
  background: var(--wall-color);
}

/* Simplified nature scene */
.nature-scene {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  contain: size paint;
  transform: translateZ(0);
  background-image: url('../assets/vista.jpg');
  background-size: cover;
  background-position: center;
  z-index: 0;
  /* Remove expensive filters on mobile */
  filter: brightness(0.9);
}

/* Mobile optimization - disable filters completely */
.mobile-optimized .nature-scene,
.perf-low .nature-scene {
  filter: none;
  image-rendering: auto;
  background-size: cover;
  content-visibility: auto;
}

/* Medium quality optimizations */
.perf-medium .nature-scene {
  filter: brightness(0.9);
  image-rendering: auto;
  background-size: cover;
}

/* Simplified mobile window frame */
.window-frame {
  position: relative;
  width: 100%;
  height: 100%;
  border: var(--window-frame-border) solid #3d2412;
  border-radius: 12px;
  overflow: hidden;
  background: transparent;
  z-index: 2;
  transform-origin: center;
  /* Simple background pattern */
  background-image: linear-gradient(90deg, rgba(61, 36, 18, 0.8) 0%, rgba(81, 46, 24, 0.8) 100%);
  /* Simplified shadow */
  box-shadow: 0 0 20px rgba(0,0,0,0.3);
}

/* Mobile optimization - remove complex styling */
.mobile-optimized .window-frame,
.perf-low .window-frame {
  box-shadow: none;
  border: 2px solid #444;
  background-image: none;
  background-color: #3d2412;
}

/* Simplified inner frame */
.window-frame::before {
  content: '';
  position: absolute;
  inset: 0;
  border: var(--window-frame-inner-border) solid #8B4513;
  border-radius: 8px;
  /* Simplified shadow */
  box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
  z-index: 2;
}

/* Remove decorative elements on mobile */
.mobile-optimized .window-frame::before,
.mobile-optimized .window-frame::after,
.mobile-optimized .window-frame-overlay,
.perf-low .window-frame::before,
.perf-low .window-frame::after,
.perf-low .window-overlay,
.perf-low .window-frame-overlay {
  display: none;
}

.window-frame::after {
  content: '';
  position: absolute;
  inset: calc(-1 * var(--window-frame-inner-border));
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 12px;
  pointer-events: none;
}

.window-frame-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
}

/* Simplified panes */
.pane-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.window-panes {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: repeat(2, 1fr);
  width: 100%;
  height: 100%;
  gap: var(--window-pane-gap);
  padding: var(--window-pane-gap);
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
}

/* Simplified panes for mobile */
.mobile-optimized .window-panes.simplified {
  display: block;
  contain: strict;
}

/* Cross panes - simplified */
.crosspane-vertical,
.crosspane-horizontal {
  position: absolute;
  background: #3d2412;
  box-shadow: 0 0 5px rgba(0,0,0,0.2);
  z-index: 3;
  background-image: linear-gradient(90deg, rgba(61, 36, 18, 0.9) 0%, rgba(81, 46, 24, 0.9) 100%);
}

/* Remove complex styling on mobile */
.mobile-optimized .crosspane-vertical,
.mobile-optimized .crosspane-horizontal,
.perf-low .crosspane-vertical,
.perf-low .crosspane-horizontal {
  background-image: none;
  background-color: #3d2412;
  box-shadow: none;
}

.crosspane-vertical {
  left: 50%;
  top: 0;
  bottom: 0;
  width: var(--window-cross-pane-width);
  transform: translateX(-50%);
}

.crosspane-horizontal {
  top: 50%;
  left: 0;
  right: 0;
  height: var(--window-cross-pane-width);
  transform: translateY(-50%);
}

/* Simplified individual panes */
.pane {
  position: relative;
  background: rgba(255,255,255,0.05);
  border-radius: 4px;
  overflow: hidden;
  z-index: 2;
}

/* Remove complex pane effects on mobile */
.mobile-optimized .pane,
.mobile-optimized .pane-glass,
.perf-low .pane,
.perf-low .pane-glass {
  background: rgba(255,255,255,0.05);
  border-radius: 4px;
}

.mobile-optimized .pane::before,
.mobile-optimized .pane::after,
.mobile-optimized .pane-glass::before,
.perf-low .pane::before,
.perf-low .pane::after,
.perf-low .pane-glass::before {
  display: none;
}

.pane::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.03) 100%);
  border: 1px solid rgba(255,255,255,0.1);
  box-shadow: inset 0 0 5px rgba(255,255,255,0.05);
}

.pane-glass {
  position: absolute;
  inset: 0;
  border: 1px solid rgba(255,255,255,0.1);
  background: rgba(255, 255, 255, 0.05);
  box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.05);
}

.pane-glass::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 100%);
  z-index: 2;
}

.pane::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.05) 0%, transparent 60%);
}

.top-left { top: 0; left: 0; }
.top-right { top: 0; right: 0; }
.bottom-left { bottom: 0; left: 0; }
.bottom-right { bottom: 0; right: 0; }

.window-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
}

/* Simplified room styling for better mobile performance */
.cozy-room {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 6000px; /* Reduced size for mobile */
  height: 4500px;
  transform-origin: center center;
  transform: translate(-50%, -50%) translate(var(--translateX, 0), var(--translateY, 0)) scale(var(--scale, 1));
  pointer-events: none;
  z-index: -2;
  contain: layout paint;
  will-change: transform;
}

/* Hide room completely on mobile for performance */
.mobile-optimized .cozy-room {
  display: none;
}

/* Further reduce room size in reduced-quality mode */
.perf-low .cozy-room,
.perf-medium .cozy-room {
  width: 4000px;
  height: 3000px;
}

/* Simplified room walls */
.room-wall {
  position: absolute;
  background-color: var(--room-wall-color);
  contain: layout paint;
}

/* Left wall - simplified */
.wall-left {
  top: 0;
  left: 0;
  width: 50%;
  height: 100%;
  background: var(--room-wall-color);
  background-image: linear-gradient(to right, rgba(20, 30, 60, 1) 0%, rgba(35, 49, 86, 1) 100%);
  box-shadow: inset 0 0 50px rgba(0,0,0,0.2);
}

/* Back wall - simplified */
.wall-back {
  top: 0;
  right: 0; 
  width: 50%;
  height: 100%;
  background: var(--room-wall-color);
  background-image: linear-gradient(to left, rgba(20, 30, 60, 0.9) 0%, rgba(35, 49, 86, 1) 100%);
  box-shadow: inset 0 0 50px rgba(0,0,0,0.2);
}

/* Remove room wall effects in low quality mode */
.perf-low .room-wall,
.perf-medium .room-wall {
  background-image: none;
  background-color: var(--room-wall-color);
  box-shadow: none;
}

/* Simplified floor */
.room-floor {
  position: absolute;
  bottom: -10%;
  left: 0;
  width: 100%;
  height: 10%;
  background: var(--room-wall-dark);
  transform-origin: top center;
  transform: rotateX(90deg);
  z-index: 1;
  contain: paint;
}

/* Simplified window sill */
.window-sill {
  position: absolute;
  bottom: -60px;
  left: 0;
  width: 100%;
  height: 60px;
  z-index: 3;
  contain: layout paint;
}

/* Mobile sill optimization */
.mobile-optimized .window-sill {
  height: 30px;
  bottom: -15px;
}

.window-sill.simplified {
  height: 40px;
  bottom: -40px;
}

.sill-top {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 30px;
  background: linear-gradient(to bottom, var(--sill-oak-mid) 0%, var(--sill-oak-light) 100%);
  box-shadow: inset 0 1px 3px rgba(255,255,255,0.1);
}

.sill-front {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 30px;
  background: linear-gradient(to bottom, var(--sill-oak-dark) 0%, #8f5c3b 100%);
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

/* Simplified sill for mobile and low quality */
.mobile-optimized .sill-top,
.mobile-optimized .sill-front,
.perf-low .sill-top,
.perf-low .sill-front {
  height: 15px;
  background: var(--sill-oak-mid);
  box-shadow: none;
}

/* Remove ambient lighting effects on mobile */
.window-background::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  box-shadow: 0 0 100px 50px rgba(173, 216, 230, 0.1);
  pointer-events: none;
  z-index: -1;
}

/* Hide lighting effects on mobile and low quality */
.mobile-optimized .window-background::after,
.perf-low .window-background::after {
  display: none;
}

/* Ambient wall lighting - desktop only */
.cozy-room::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at 50% 50%, rgba(40, 60, 100, 0.2) 0%, rgba(20, 30, 60, 0.9) 100%);
  pointer-events: none;
  z-index: 0;
}

/* High quality specific enhancements - only applied when needed */
.perf-high .nature-scene {
  will-change: transform;
  filter: brightness(0.9) contrast(1.1);
}

/* Mobile-specific ultra-minimal styling */
@media (max-width: 480px) {
  .window-sill {
    height: 20px;
    bottom: -10px;
  }

  .sill-top, .sill-front {
    height: 10px;
    box-shadow: none;
  }
}

/* Skip animations during scrolling/zooming */
.is-scrolling .room-wall,
.is-scrolling .window-sill,
.is-scrolling .nature-scene {
  transition: none !important;
  animation-play-state: paused !important;
}

/* Optimize window positioning for smoother scrolling */
.window-background {
  content-visibility: auto;
  contain-intrinsic-size: 1000px;
}

/* Apply aggressive simplification for very low-end devices */
.simplified-background .window-background,
.simplified-background .nature-scene,
.simplified-background .window-frame {
  background: var(--wall-color) !important;
  box-shadow: none !important;
  border: 1px solid #444 !important;
  filter: none !important;
}